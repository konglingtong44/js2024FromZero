AWSクラウド移行プロジェクト テスト方針

1. テストの目的と目標

本テスト方針の目的は、現行システムをオンプレミス環境からAWSクラウド環境へ移行するにあたり、移行後の新システムが高い品質水準を維持し、期待される機能・性能要件を満たすことを検証することです。具体的な目標は以下の通りです：
	•	システム品質の確保: 移行によってシステムの安定性、信頼性、およびセキュリティに悪影響がないことを確認します。移行後も現行システムと同等以上の品質を保証し、エラーやセキュリティ脆弱性が混入していないことを検証します。
	•	機能の完全性検証: 新旧システムで提供される全ての機能が一致して正しく動作することを検証します。現行システムで実現されている業務機能がAWS上でも漏れなく再現され、意図しない機能欠落や振る舞いの変化がないことを確認します。
	•	性能・応答性の検証: クラウド環境への移行後も、システムのパフォーマンス（応答時間、スループット、並行処理能力など）が現行と同等またはそれ以上であることを目標とします ￼。ピーク負荷時にもユーザ体感性能が許容範囲内に収まるかをテストします。
	•	現行システムとの一貫性: データ処理結果や画面表示、帳票出力等において現行システムとの同等性（パリティ）を確保することを重要な目標とします。移行後の新システムから得られる出力が、同じ入力条件で現行システムから得られる出力と一致することを検証します。
	•	移行リスクの最小化: 移行作業に伴うビジネスリスクを低減するため、事前に可能な限り問題を検出・是正します。テストを通じて潜在的な不具合を洗い出し、本番移行後の障害発生を未然に防ぐことが目的です。
	•	関係者の安心感醸成: 十分なテストを実施することで、顧客およびステークホルダーに対し、移行後システムの品質に対する信頼性を示します。検証結果をエビデンスとして提示し、本番稼働への承認を得ることも目標の一つです。

以上の目標を達成するため、本プロジェクトでは計画的かつ網羅的なテスト活動を実施します。機能要件および非機能要件（性能、セキュリティ、信頼性など）の両面から検証を行い、クラウド移行後のシステムが現行システムと同等以上の品質・能力を備えることを確認します。

2. テスト範囲

本プロジェクトにおけるテスト範囲は、単体テストから受入テストまで、システム開発ライフサイクルの全工程をカバーします。各テスト工程および対象範囲は以下の通りです。
	•	単体テスト (UT: Unit Test): 個々のプログラムやモジュール単位でのテストです。開発者によりAWS対応のコード変更箇所を中心に実施され、メソッドや関数レベルで正しく動作することを確認します。AWS特有のライブラリやサービス呼び出し（例：AWS SDKの利用部分、Lambda関数ハンドラなど）についても、この段階で期待通り動作するか検証します。単体テストでは主に機能要件に対する検証を行い、不正入力に対するエラー処理や境界値のチェックなども含めます。なお、性能やセキュリティといった非機能要件の検証は基本的に含みませんが、コードレベルでのセキュリティコーディング規約遵守など簡易なチェックは実施します。
	•	結合テスト (IT: Integration Test): 複数のモジュールを組み合わせたインターフェースの検証を行います。AWS上に構築された各コンポーネント（例：Lambda関数とAuroraデータベース間の連携、S3バケットへのファイル入出力、EC2上アプリケーションから他システムAPIへの通信など）を統合し、モジュール間のインタラクションに不整合がないかテストします。現行システムと連携している外部システムやサービスとのインタフェース互換性もこの段階で確認します（互換性テストの一環として実施）。例えば、AWS環境下で生成されるデータフォーマットや通信プロトコルが現行環境と一致しているか、外部システムから見て違いが生じないかを検証します。結合テストでは機能要件のシナリオテストに加え、一部エラーシナリオも試験し、モジュール間エラーハンドリングが期待通り行われるか確認します。
	•	システムテスト (ST: System Test): システム全体を本番相当の構成で動作させ、総合的な検証を行います ￼。AWS上に構築された本番同等のステージング環境を用い、全ての機能要件について網羅的なテストケースを実行します。業務フローに沿ったエンドツーエンドのテストに加え、非機能要件の検証もこの工程で集中的に実施します。具体的には性能テスト（負荷・応答時間測定）、セキュリティテスト（脆弱性診断等）、回復性テスト（障害復旧シナリオの検証）および災害復旧テスト（DRシナリオの検証）など、後述する各種テストタイプを含みます。システムテストでは、テストデータとして本番相当量のデータや実運用に近いデータパターンを使用し、移行後システムの実力を検証します。また、現行と新環境の同等性検証もこの段階で集中的に実施し、両システムの出力差異がないことを確認します。
	•	ユーザー受入テスト (UAT: User Acceptance Test): エンドユーザや業務部門が参加し、新システムが業務要件を満たしているか最終確認する段階です ￼。システムテストで品質を確認した上で、実際のユーザが想定シナリオを操作し、使い勝手や業務適合性を検証します。UATでは特に顧客が重視する現行との同値性テスト（現新比較検証）を重点的に行い、現行業務との結果差異がないことを業務担当者自身で確認いただきます。また、UAT環境は可能な限り本番と同一のAWS構成・データセットで実施し、ユーザ視点での最終検証とします。受入テストを通じて顧客から本番移行の承認を得ることが目標です。

上記のテスト工程を通じて、本移行プロジェクトのテスト範囲はシステムの全機能と主要な非機能特性を網羅します。テスト範囲には、AWS上で再構築されるアプリケーションコード、移行対象のデータベース（Auroraへ移行予定のDBスキーマとデータ）、インフラ設定（ネットワーク構成、セキュリティグループ、IAM設定等）、および関連する運用スクリプト類が含まれます。また、外部システムとのインタフェース部分や、ユーザインタフェース（画面/報告書類）の表示内容についても範囲に含め、UIの差異や帳票レイアウトの乱れがないか確認します。

一方、テスト範囲から除外する項目がある場合は事前に合意します。例えば、AWSへの移行に際し仕様上廃止・変更となる機能がある場合、その部分は同等性検証の対象外とする、といった対応を取ります（該当箇所は要求仕様書に基づき事前にリストアップします）。基本方針として、現行システムで利用されている全ての機能と移行によって追加・変更される全ての要素をテスト範囲に含めるものとし、顧客の業務継続性に影響する領域を漏れなく検証します。

3. テスト種類と内容

本節では、本プロジェクトで実施する各種テストの種類とその目的・内容について詳述します。特にPPT第62頁で挙げられていたテストタイプ（セキュリティ、回復性、性能、互換性、災害復旧等）を中心に、各テストの定義と実施内容を明確にします。

3.1 セキュリティテスト

セキュリティテストでは、システムの機密性・完全性・可用性（CIAトライアド）を確保するために、潜在的な脆弱性やセキュリティ上の不備を検出します。移行後のAWS環境において、オンプレミス時と同等以上のセキュリティ水準を維持できていることを検証することが目的です。主な実施内容は以下の通りです：
	•	脆弱性スキャンとペネトレーションテスト: 新システムに対し、自動脆弱性スキャナを用いたセキュリティスキャンを実施し、既知の脆弱性（OSIレイヤ別の脆弱性やライブラリのセキュリティホール等）が存在しないかチェックします。また必要に応じて専門チームまたは第三者機関による侵入テスト（ペネトレーションテスト）を行い、外部からの攻撃シナリオに対する耐性を評価します。Webアプリケーション部分に関しては、OWASP Top 10に代表される脆弱性（SQLインジェクション、XSS、CSRF等）がないことを確認します。
※AWS環境へのペネトレーションテストについては、AWSのガイドラインに従い事前申請が必要なケースがありますが、本番前の検証目的で適切に実施します ￼。
	•	クラウドセキュリティ設定の検証: AWS特有のセキュリティ設定が適切に行われているかをテストします。具体的には、IAMポリシーやロールの最小権限の原則が守られているか、S3バケット等のストレージが意図せず公開設定になっていないか、RDS/Aurora等のデータベースで暗号化や透過的暗号化が有効化されているか、ネットワークのセキュリティグループやACLが適切に設定され不必要なポートが開放されていないか、などをチェックリストに基づき検証します。またAWS Well-Architected Frameworkのセキュリティベストプラクティスに照らし、設定漏れがないか確認します。必要に応じてAWS Configやセキュリティベンチマーク（CIS AWS Foundations Benchmarkなど）の結果も活用し、設定の遵守状況を評価します。
	•	認証・認可機能テスト: システムのユーザ認証やアクセス制御機構が正しく機能し、権限のないユーザが機密データにアクセスできないことを確認します。例えば、移行後も従来通りユーザID/PWやシングルサインオンの仕組みが機能するか、セッション管理が安全に行われているかをテストします。不正なトークンでのアクセス試行が遮断されること、権限別にUI上アクセスできるメニューやデータが制限されていること等を検証します。
	•	監査証跡とログの検証: AWS CloudTrailやCloudWatch Logsなどを用いて、重要な操作やイベントが記録されているかを確認します。セキュリティインシデント発生時に追跡可能となるよう、管理者操作やシステムエラーがログに残っていること、必要なログ項目（タイムスタンプ、ユーザID、操作内容、送信元IP等）が含まれていることをチェックします。また疑似的な不正操作を行い、検知・アラートが適切に発報されるか（例：WAFによる攻撃検知、GuardDutyによる脅威検出）もテストします。

セキュリティテストは主にシステムテスト工程で実施し、専門のセキュリティチームが関与して評価します。テスト結果に基づき、必要なセキュリティ強化策（設定変更やコード修正）を本番移行前に適用します。

3.2 回復性テスト

回復性テスト（リカバリテストとも呼びます）では、部分的な障害発生時にシステムがどの程度迅速に復旧できるか、またデータの整合性を維持できるかを検証します。狭義の災害（大規模障害）ではなく、より小規模な障害シナリオに焦点を当てたテストです。目的は、システムの故障からの復旧能力（Recoverability）を確認し、本番環境で発生し得る単一故障点への対処策が有効に機能することを証明することです ￼。具体的なシナリオおよび内容は以下の通りです：
	•	サーバ/インスタンス障害からの復旧: アプリケーションサーバ（例：EC2インスタンス）やコンテナ（ECS/EKS上のコンテナ）がダウンした場合の挙動をテストします。Auto Scalingを設定している場合は自動で代替インスタンスが起動しトラフィックを引き継ぐか、ロードバランサが健全なインスタンスに切り替えるかを確認します。意図的にEC2インスタンスを停止/終了させ、その後サービスが中断なく提供され続けるか監視します。また、サーバダウン中にキューに蓄積された処理（もしあれば）が復旧後適切に再処理されるかも検証します。
	•	データベースプライマリ障害時のフェイルオーバー: AuroraなどマルチAZ構成のデータベースを使用している場合、プライマリインスタンスに障害を発生させてリーダーインスタンスへの自動フェイルオーバーが正しく行われるか確認します。具体的には、Auroraクラスタのプライマリノードを強制的に再起動/停止し、数十秒以内にリーダーノードが昇格してサービスが継続すること、アプリケーションからのDB接続が新プライマリに自動切替されトランザクションが継続できることを検証します。フェイルオーバー中に発生した接続エラーがリトライ処理で救済されるか、ユーザに影響するエラーとなっていないかも確認します。
	•	ネットワーク断・遅延からの復旧: 一時的なネットワーク断や高遅延が発生した状況をシミュレートし、復旧後にシステムが安定稼働に戻るか検証します。例えば、AWS上の一部サービス（ElastiCacheや外部API等）への接続をファイアウォールルールで遮断してみて、アプリケーションがリトライやフォールバックするか、接続復旧後に正常処理が再開されるかを確認します。また、ネットワーク分断中に発生したエラーログが適切に記録・通知されていること、運用者が迅速に気付けることも確認ポイントです。
	•	バックアップからの復元テスト: 定期的に取得しているデータバックアップ（スナップショットや増分バックアップ）から、データを正常にリストアできるかを検証します ￼。例えば、RDS/Auroraのスナップショットから新しいDBインスタンスを作成し、アプリケーションを接続して整合性を確認します。あるいは、重要なS3データをGLACIER等からリストアする手順をテストし、所要時間およびリストア後のデータ完全性をチェックします。このバックアップ復元テストにより、万一のデータ破損時にも復元が可能であることを事前に証明します。

回復性テストは、システムテストの中盤で実施し、想定される様々な部分障害に対するシステムのセルフヒーリング能力や手動復旧手順の有効性を検証します。テスト結果から、RTO (Recovery Time Objective: 復旧目標時間) および RPO (Recovery Point Objective: 復旧時点目標、データ損失許容範囲) を満たせることを確認します ￼。万一基準を満たさない場合は、構成変更（例：冗長化追加）や運用手順の改善を検討します。

3.3 性能テスト

性能テストでは、システムが期待する負荷条件下で十分なパフォーマンスを発揮できることを検証します。具体的にはレスポンスタイム、スループット、同時ユーザ数、リソース使用率などの観点で測定と評価を行います。性能テストはシステムテスト工程内で計画的に実施し、本番稼働を想定したシナリオでシステムの性能上限やボトルネックを洗い出します。主な性能テストの内容は以下です：
	•	負荷試験 (Load Testing): 平常時およびピーク時の想定負荷シナリオを再現し、システムがその負荷を安定処理できるか確認します。例えば同時ユーザ〇〇人、1時間あたりトランザクション〇〇件といった条件で、実際に擬似ユーザからのリクエストを高並行で発生させます。WebアプリケーションであればJMeterやLocust、AWSの分散負荷ツールなどを用いて、一連の業務シナリオ（ログイン→検索→登録→ログアウト等）をスクリプト化し、一秒間あたりの処理件数や平均応答時間を計測します。事前に現行システムでの性能測定結果やSLAをベースラインとして定め、移行後システムがそれを下回らないことを確認します。
	•	ストレス試験 (Stress Testing): システムの許容限界を探るため、通常のピークを超える高負荷を漸増的にかけてテストします。例えば通常の2倍、3倍の同時ユーザやリクエストを発生させ、どのリソースで先にボトルネックが発生するか（CPU、メモリ、ディスクIO、ネットワーク帯域、DB接続プール等）を監視します。AWS CloudWatchのメトリクスを活用し、各コンポーネント（EC2、Aurora、Lambda、ElastiCache等）のリソース使用率を把握します。許容閾値を超えた場合のシステム挙動（応答時間の悪化、エラー発生など）を記録し、必要に応じてスケーリング設定の調整やプログラムのパフォーマンス改善を行います。ストレス試験の結果、十分なスケーラビリティが確認できれば、将来的な負荷増大にも対応可能と判断できます。
	•	耐久試験 (Soak Testing): 長時間連続稼働時の安定性を検証するため、一定の負荷を長時間（例えば連続24時間や週末丸2日間など）かけ続けるテストを行います。これにより、メモリリークやリソース枯渇、ログ肥大化によるディスク不足など、短時間のテストでは顕在化しない問題を検出します。AWS環境ではスケジュールを組んで負荷ツールを実行し続け、並行してCloudWatchでメモリ使用量やスワップ、ファイルディスクリソースなどの変化をモニタします。テスト終了後に各種メトリクスが安定していること、エラーや警告ログが異常に増えていないことを確認します。
	•	性能チューニング検証: 負荷・ストレス試験の結果に基づき、必要に応じて性能改善の調整を行い、その効果を再テストで検証します。例えば、DBのインデックス追加やクエリ最適化、Auroraのインスタンスタイプ変更、Lambdaのメモリ割当増加、ElasticCacheの導入検討、アプリケーションコードの並列処理化など、ボトルネック対応策を適用した後、再度同等の負荷をかけて性能指標が改善したことを確認します。これにより、本番投入前に最適な構成を見出します。

性能テストでは、基準となる性能要件（例：同時ユーザ○人時に平均応答0.5秒以内等）をあらかじめ定義し、その達成を合否判定とします。結果はレポートとしてまとめ、キャパシティプランニングの根拠とします。また、性能テスト中はCloudWatchダッシュボードやX-Ray（分散トレース）などを活用し、AWSサービス内部の挙動も分析します。最終的に、移行後システムが必要十分な性能を備えていることを確認し、本番稼働に備えます。

3.4 互換性テスト

互換性テストでは、新システムが周辺環境や外部システムと正しく連携できるか、現行システムとの間でデータや操作の互換性が保たれているかを検証します。特にAWS環境への移行に伴い、ミドルウェアやプラットフォームが変更になる部分について重点的に確認します。以下の観点で実施します。
	•	外部連携の互換性: 現行システムが他システムやサービスとデータ連携している場合、そのインタフェース仕様が移行後も維持されているか確認します。たとえば、他システムとの間で取り交わすファイルフォーマット（CSVレイアウトや文字コードなど）やAPI仕様（エンドポイントURL、リクエスト/レスポンスのJSON構造など）に変更がないことを検証します。AWS上でホストされる新システムから外部のテスト用エンドポイントに接続し、想定通りのデータが送受信できるかを確かめます。必要に応じて現行システムと新システムで同じテストデータを使った送受信を行い、結果ファイルやAPI応答を比較して差異がないか検証します。
	•	クライアント環境の互換性: エンドユーザが利用するクライアント環境における表示・操作互換性を確認します。もしユーザがWebブラウザや特定の端末からシステムを利用する場合、移行後に対応ブラウザや画面レイアウト等が変わらないかテストします。主要なブラウザ（Chrome, Firefox, Edge, Safari等）でWeb UIの表示崩れがないか、レスポンシブデザインが機能しているかを確認します。また、ダウンロードされる帳票やレポートが従来と同じレイアウト・フォントで出力されるか、文字化け等がないかをチェックします。クラウド移行に伴いHTTPS証明書の適用やドメイン名変更等がある場合は、ブックマークや既存リンクが正しく新環境を指すか、リダイレクトが機能するかも検証します。
	•	データ互換性: データベースをAurora MySQL/PostgreSQL等に移行した場合、データ型や文字コード、照合順序の違いによる不具合がないか確認します。特に文字コード（例：UTF-8⇔SJIS）の変換、日付型の厳密さ、NULL値の扱いなどで差異が生じていないかをテストします。既存のSQLクエリやストアドプロシージャがAurora上でも問題なく動作するか、検索結果が同一となるかを検証します。また、移行によりライブラリやフレームワークのバージョンが変わる場合（Javaや. NETランタイム、Pythonなど）、その違いで計算結果やロジックに差異が出ていないか、例えば浮動小数点の丸め誤差や正規表現の挙動差なども注意して確認します。
	•	運用ツール・スクリプトの互換性: 現行システムで使用しているバッチ処理や運用スクリプト類（Cronジョブ、シェルスクリプト、Windowsバッチ等）をAWS環境上でも動かす場合、その実行結果に問題がないかをテストします。スクリプト内でファイルパスが変わる（例：ローカルパスからS3パスへの変更）場合や、使用コマンドの互換性（Linuxコマンドのバージョン差異など）に注意し、期待通り動作・完了するか確認します。CloudWatch EventsやAWS Lambdaで代替実装するものについても、同様の機能結果が得られているか検証します。

互換性テストは、結合テストやシステムテストの流れの中で各種シナリオに組み込んで実施します。現行システムとの比較視点を持つ点で同等性テストと重複する部分もありますが、互換性テストは**「周辺とのつながり」に着目**したテストであり、移行によって周囲に迷惑をかけない（現行と同じインタフェースを提供し続ける）ことを確認するテストと位置づけられます。これにより、クラウド移行が他システムやユーザ環境に影響を与えないことを保証します。

3.5 災害復旧テスト

災害復旧テスト（DRテスト）では、大規模な障害や災害シナリオにおいてシステム全体が復旧できるか、事前に策定した災害復旧計画が有効に機能するかを検証します。回復性テストが局所的な故障への対処だったのに対し、災害復旧テストはデータセンター全体の障害や地域規模の災害を想定したシナリオとなります。主な検証項目は以下の通りです：
	•	マルチAZ構成のフェイルオーバーテスト: AWSの各サービスが複数のアベイラビリティゾーン(AZ)にまたがって冗長化されている場合、一つのAZが利用不能になったと仮定してもシステムが稼働し続けるか検証します。具体的には、本番と同様のマルチAZ構成を持つステージング環境で、一時的に特定のAZにあるリソース（EC2やRDSインスタンスなど）を停止させます。ロードバランサ(ALB/NLB)が自動的に他のAZ上のインスタンスにトラフィックを振り分け続けること、Aurora等のマルチAZデータベースが引き続き稼働し続けクエリを処理できることを確認します。停止したAZのサービス復旧後、再同期や自動再生成が正常に行われ、冗長構成が復元されることも併せて確認します。
	•	リージョン障害を想定した切り替えテスト: 主要リージョンが大規模災害等でダウンした場合に備え、別リージョンに用意したDR環境へシステムを切り替える手順を検証します。例えば、東京リージョンから大阪リージョンへのフェイルオーバーを想定し、以下の手順をテストします:
(1) 東京リージョンで稼働中のシステムを停止（擬似的に全サービス障害が起きたと仮定）、
(2) 事前に構築してある大阪リージョンの待機系環境を起動、
(3) Route 53のDNS切替やAWS Global Acceleratorの設定変更等によりユーザからのアクセス先を大阪リージョンへ誘導、
(4) 大阪リージョン上でシステムが問題なく稼働開始することを確認、
(5) データの整合性（東京→大阪への最終レプリケーション時点のデータが反映されているか）を検証、
といった一連のDRプロシージャを実行します。切替に要した時間を計測し、RTO目標内であること、またデータ損失が許容範囲内(RPO内)であることを確認します。
	•	バックアップ復元シナリオの検証: 最悪の場合、DR環境もない状態からバックアップデータを用いて新規に環境を復旧させる手順をテストします。例えば想定として「主要リージョンが完全消失したが、他地域にスナップショットは保管されている」という状況を仮定し、そこから新リージョンにインフラを構築し直し、バックアップからDBやストレージを復元してシステムを立ち上げる一連のプロセスをドリルとして実施します。これにより、災害復旧計画書の実効性を検証し、人為的手順の不備や不明点を洗い出します。
	•	カオスエンジニアリング手法の活用: 必要に応じて、AWSのFault Injection Simulator (FIS)などのサービスを活用し、意図的にシステムへ破壊的イベントを注入して耐障害性を評価します。「特定AZで大規模停電」が起きた状況や、「ネットワークが複数AZ間で分断された」状況をFISでシミュレートし、システムがどのように応答・復旧するかを実験します。AWS FISを使用することで、AWSワークロードにストレスを与え、その応答を評価することが可能です ￼。このようなカオスエンジニアリング的テストにより、設計上の想定外の挙動がないか検証します。

災害復旧テストは、プロジェクト終盤のユーザ受入テスト後またはその一環として実施し、関係者立ち合いのもとで結果を確認します。テスト終了後、DR計画に必要な修正（手順書の更新・追加投資の検討など）を行い、本番運用に備えます。最終的に、本番環境で定期的にDR訓練を行うことも提案し、計画の継続的改善を促します。

4. 同等性テストの専門戦略

顧客が特に重視する同値性テスト（現行システムとの同等性テスト）について、専用の戦略を定義します。同等性テストとは、現行システム（旧システム）と新システムで同じ入力に対し同じ出力・結果が得られることを検証する手法です。言い換えれば現新比較テストとも呼ばれ、システム改修前後の出力を比較して不具合の有無を確認するテストを指します ￼。本プロジェクトでは、移行後システムが現行と機能的に同一（Functional Equivalence）であることを証明するために、以下の戦略で同等性テストを実施します。
	•	同一データ/シナリオによる現新比較: 現行システムと新システムに対し、可能な限り同一のテストデータ入力を与え、その結果を比較します。具体的には、主要な業務シナリオや代表的な取引を抽出し、その入力データ（例：画面からの入力値、またはバッチ処理の入力ファイル）を現行環境とAWS移行後環境の双方で処理させます。得られた出力結果（画面表示、計算結果、データベースへの書き込み内容、出力ファイル、帳票、APIレスポンスなど）を項目単位で比較し、全て一致することを確認します。比較は人手によるチェックではなく、可能な限り自動スクリプトで実施し、差異があればレポートに出力させます。例えば、DBの同一テーブルを抽出して差分チェックを行うスクリプトや、2つのシステムから出力されたCSVを読み込んで突合するPythonスクリプト等を用意します。自動化によりヒューマンエラーを防ぎ、精密な比較を行います。
	•	テストケースの網羅性: 同等性検証の対象となるテストケースは、単純な正常系だけでなく代表的な異常系や境界条件も含めます。例えば数値計算の端数処理や丸めロジック、閾値境界の処理など、システム間で差異が出やすいケースを重点的に洗い出して試験します。また、過去の運用で不具合や問い合わせがあったケースについても同等性テストに組み込み、移行後に同様の問題が再発しないか確認します。テスト対象データ量については、重要業務に関わるデータは100%チェックし、その他周辺機能についてもリスクに応じてサンプリング検証を行います。可能であれば、本番データの一部（個人情報はマスキング）を用いて、新旧システムで処理し結果を比較することで、実データに即した同等性確認を実施します。
	•	自動化とツール活用: 同等性テストはその性質上、多数の比較チェックが発生し手作業では膨大な労力を要します。現行と新システム両方のデータをそろえ、画面や帳票ごとに繰り返し検証する必要があるため、目視チェックでは非効率でミスも起こりえます ￼。そこで本プロジェクトでは、比較作業の自動化を徹底します。例えば、テストケースごとに現行システムから取得した結果と、新システムから取得した結果をペアで保存し、差分ツールで比較する一連の処理を自動化します。UIの目視比較が必要な場合には、画面キャプチャ画像の自動取得と画像比較ツールの活用を検討します。また、商用の現新比較テスト支援ツール（もし導入可能であれば）や、Excelマクロ等を駆使して効率化を図ります。自動化により、比較結果のエビデンス（証跡）を自動取得して保存することも可能となり、後日の確認や顧客への説明に役立てます ￼。
	•	現新差分の扱いと受け入れ基準: 同等性テストの結果、万一現行と新で差異が見つかった場合の扱い基準を定めます。基本的には全ての差異は不具合もしくは要調査事項として扱いますが、事前に合意された仕様変更や改善事項による意図的な差異については例外とします。その場合でも、差異リストに「仕様変更による差異」として明示し、顧客に認識いただきます。その他の予期せぬ差異については、原因を分析してバグであれば修正し、再度同等性テストを実行して差異が解消されることを確認します。合格基準は「仕様上許容された差異を除き、全ての比較項目が一致すること」とします。
	•	同時並行稼働による検証（必要に応じて）: プロジェクト計画によっては、一定期間現行システムと新システムを並行稼働させるパラレル運用を行い、その期間中に実際の業務データで同等性を確認することも検討します。例えば一部業務処理を新システムで影響なく実行可能な場合、移行前に新システムで本番データを処理し結果を現行と比較するといったトライアル運用を実施します。これにより実運用レベルでの同等性保証をさらに高めることができます（難易度が高い場合はシミュレーションに留めます）。

以上の戦略により、現行システムとAWS移行後システムの出力や動作が等価であることを厳密に検証します。現新比較テストは受入テスト(UAT)の一環としてユーザにも確認いただく予定ですが、その前段階として専門チームで徹底的に比較検証を行い、信頼性の高い結果をもって顧客に品質を保証します。現新比較テストの実施により、移行後も業務に支障がないことを客観的に証明し、顧客の不安を解消します。

5. AWS環境下でのテスト実施戦略

AWSクラウド上でテストを行うにあたり、どのサービスコンポーネント上でどのようなテストを実施するか、環境準備と実行戦略を定めます。本プロジェクトでは、本番を見据えた複数のテスト環境をAWS上に構築し、それぞれの環境で適切なテストを行います。また、AWSならではのサービスや機能を活用してテスト効率と網羅性を向上させます。以下、主要な観点を示します。
	•	テスト環境の構築と分離: 開発・テストの各フェーズに応じて、AWS上に開発環境（Unitテスト用）、結合テスト環境（Integrationテスト用）、ステージング環境（System/UATテスト用）を用意します。これらの環境は本番相当の設定を持ちながら互いに独立させ、テスト中のデータや設定変更が本番に影響しないようにします。各環境はInfrastructure as Code（例：AWS CloudFormationまたはTerraform）で構築・管理し、環境間の設定差異を極力なくします。こうすることで「ステージング環境で合格したものは本番でも動く」という信頼性を確保します。
	•	Aurora（RDS）上でのテスト: 本システムの主要データベースはAmazon Auroraを使用予定のため、Aurora上でのテスト戦略を策定します。AuroraはマルチAZ対応や高性能が利点ですが、性能テストや回復性テストの対象にもなります。性能テストではAuroraのリソース（CPU、メモリ、クエリ実行計画など）に注目し、大量データに対するクエリ応答時間や複数同時接続でのスループットを測定します。専用のモニタリング（Performance Insights や Enhanced Monitoring）も有効にし、インデックスの有無による性能差や、キャッシュヒット率など詳細を分析します。回復性テストでは前述の通り、Auroraリーダーへのフェイルオーバーをシナリオに組み込み、障害時の挙動を検証します。さらに、データ移行後のデータ整合性チェックもAurora上で実施します。移行した全テーブル件数や主要な集計値が現行DBと一致するかをSQLで検証し、差異があれば修正対応します。Auroraのテストでは、CloudWatchメトリクスに加え、慢SQL検出やロック競合発生の有無も確認し、本番運用で問題が起きにくい状態に調整します。
	•	Lambda関数のテスト: 本システムでAWS Lambdaを使用する箇所（サーバレスで実装されたバッチ処理やAPI処理など）がある場合、それらのテストも入念に行います。Lambda関数自体の単体テストはコードレベルで開発者が実施しますが、結合テストでは実際にAWS上にデプロイしたLambda関数をトリガーして動作確認します。たとえば、Amazon S3にファイルがアップロードされた際にLambdaが起動するフローであれば、テスト用S3バケットにファイルを投入し、Lambdaが起動したこと（CloudWatch Logsへのログ出力で確認）や期待する処理結果（例えばDBへの書き込み）が得られたことを確認します。API Gateway経由で呼び出すLambdaであれば、テストクライアントからAPIを呼び出し、HTTPレスポンスコードやレスポンスボディが期待通りかチェックします。さらに、Lambdaの並行実行に関するテストも重要です。高頻度にイベントが発生した場合にLambdaの同時実行数が増大しますが、それでも処理遅延やエラーが発生しないか、必要なら制限（Concurrency Limit）の設定を調整します。CloudWatchメトリクスで各Lambdaの実行回数、エラー率、実行時間、メモリ消費などを監視し、閾値内であることを確認します。
	•	CloudWatchを活用したモニタリング: テスト実行中はAWSの監視サービスであるCloudWatchをフル活用し、システムの内部状態や性能指標をリアルタイムで把握します。各EC2インスタンスやRDS、Lambda、ECSタスク等について重要メトリクスのダッシュボードを用意し、テストシナリオ進行中にCPU使用率やメモリ、ネットワーク、ディスクI/O、DB接続数、キューの長さ等を監視します。異常値を検知した場合はすぐさま原因を分析し対応します。また、CloudWatch Logs/Logs InsightsでアプリケーションログやLambdaログを収集・分析し、テスト中に出力されたエラーや警告がないかチェックします。必要に応じてCloudWatchアラームを設定し、閾値を超えた際に通知を受け取ることで、テスト担当者が見逃さない仕組みを整えます。これにより、テスト結果の客観的なデータ収集が可能となり、性能評価やチューニングに役立てます。
	•	その他AWSサービスに関するテスト: 本システム固有の使用サービスに応じて、それぞれのテスト観点を考慮します。例えば、Amazon S3を利用する場合は、S3へのファイルアップロード・ダウンロードの処理速度や権限設定の検証、暗号化設定の確認を行います。Amazon SQSやAmazon SNSを利用している場合は、メッセージのロスや順序性が問題ないか、再試行ポリシーが機能しているかをテストします。Amazon Cognito等で認証基盤を構築している場合は、ユーザプールやIDプールの設定で意図通りの認可制御ができているかを検証します。さらに、AWS WAFやShieldを設定している場合は、模擬攻撃トラフィックを流してブロックされるか確認する、といった観点も含めます。

以上のように、AWS環境下でのテストは各サービス特有の挙動を理解した上で計画・実施します。必要に応じてAWSのソリューションアーキテクト等から助言を得つつ、クラウドならではの利点（スケーラビリティ、監視性、自動化機能）を最大限活用して効率的かつ効果的なテストを行います。

6. 災害復旧テスト方針

前述の災害復旧テスト（DRテスト）について、特に多AZ環境やマルチリージョン環境での故障注入と切替え方法にフォーカスして補足方針を示します。本番さながらの障害シナリオをテスト環境で演出し、システムの復旧能力を高めます。
	•	多AZ障害シナリオの検証: システム構成がマルチAZ冗長を組んでいる場合、テスト環境でも意図的に一方のAZに障害が起きたことをシミュレートします。具体的には、例えば東京リージョンの「ap-northeast-1a」と「ap-northeast-1c」にサーバを分散配置している場合、1a上のインスタンスをすべて停止するスクリプトを実行します（またはFISでネットワーク遅延を極端に発生させ機能不全にする）。このときロードバランサのヘルスチェックにより1a上のインスタンスは切り離され、トラフィックは自動的に1c上の健全なインスタンスに集中するはずです。残存インスタンスで負荷に耐えられるかを監視し、必要に応じてAuto Scalingが新規インスタンスを立ち上げる挙動も確認します。データベースもマルチAZ（同期レプリカ）構成であれば、プライマリが属するAZ側を停止してフェイルオーバーするシナリオを実施します。これらの操作により、多AZ構成が設計通り機能するか実証します。テスト後は停止したリソースを復旧させ、元の冗長構成に自己治癒することも確認します。
	•	クロスリージョンDRテスト: DR対策として別リージョンに予備環境を構築している場合、その切替テストを年次行事としてではなく、本移行テスト期間中に一度は訓練として実施します。手順は前述の通りですが、ポイントとしては人為的ミスなく迅速に切替が行えるかに注目します。DNS切替時間などシステム的な制約だけでなく、オペレーション手順の洗練も重要です。担当者が手順書通りに操作し、緊急時に慌てず対応できるか、想定外の事態（例えばDNSプロパゲーションの遅延など）にも対処できるかを訓練します。こうしたDRテストは、関係部署（インフラ運用チームや経営層など）にも周知し、本番さながらの緊張感で取り組みます。結果として得られたRTO/RPO実績値は顧客と共有し、必要であればDR計画を見直します。
	•	Fault Injectionによる継続的テスト: AWS Fault Injection Simulator（FIS）などを用いることで、より細かな障害シナリオも自動化・定期実行できます。例えば、毎週1回深夜にテスト環境で微小な障害を発生させ、自動復旧が確実に動くことを確認する、といった継続的なレジリエンステストを行うことも提案します。FISではEC2インスタンスのCPU負荷を意図的に100%にする、特定のプロセスをKillする、ネットワークパケットをドロップさせる等のシナリオを簡単に実行可能です ￼。これを用いて、本番運用中も定期的な障害耐性テスト（カオステスト）を実施し、問題検知と組織のオペレーション練度向上に役立てる方針です。
	•	結果の文書化と改善: 災害復旧テストの実施結果については詳細なレポートを作成し、起こした障害シナリオ、対応手順、復旧所要時間、データ損失の有無、問題点などを記録します。顧客と合意した目標値（RTO○時間以内・RPO○分以内等）を満たしているか示し、未達の場合は追加対策を提案します（例：より短いRPOを求めるならデータ同期方式を変更する等）。本番稼働後も定期的にDR訓練を継続実施する計画を立て、顧客のBCP/DR計画の一環として組み込みます。

以上により、単なる通常時のテストだけでなく、非常時におけるシステムの堅牢性も十分に検証し、想定し得る災害に対する備えを万全にします。

7. テスト計画のスケジュールとマイルストーン

本プロジェクトのテストフェーズ全体にわたるスケジュール概要と主要マイルストーンを示します。移行プロジェクトの計画に沿って、テスト活動は段階的に展開され、各フェーズ完了時には成果物レビューと品質ゲートチェックを行います。
	•	テスト計画策定完了 (マイルストーン): プロジェクト初期に本テスト方針書および詳細なテスト計画書を策定し、顧客と合意します。ここでテスト範囲・体制・スケジュール・合格基準などを確認し、以降の指針とします。本ドキュメント提出をもってこのマイルストーンとします。
	•	単体テスト期間 (計画: ～○月○日): 開発フェーズと並行して単体テストを継続的に実施します。各モジュール開発完了後速やかにUTを行い、不具合修正をフィードバックします。単体テスト期間終了の判定基準は「全モジュールの単体テストケース実施完了、重大バグ修正済み、カバレッジ目標達成（例：ステートメントカバレッジ80%以上）」。単体テスト完了時点で単体テスト完了報告会を行い、結果を共有します（マイルストーン）。
	•	結合テスト期間 (計画: ○月○日～○月○日): システムの主要機能が一通り実装でき次第、結合テストを開始します。テスト環境構築完了が前提となります（環境構築完了もマイルストーン）。結合テストではモジュール間インタフェースの不整合やデータ連携の不具合を洗い出し、随時修正します。結合テストはスプリント的に複数イテレーション回す計画で、1回目で大半のシナリオ網羅、2回目で残件潰しとリグレッション確認という流れを想定します。結合テスト完了判定は「主要インタフェースでCriticalな不具合がない、残存バグは軽微で次フェーズ移行に問題なし」とします。完了後、結合テスト結果レビューを実施（マイルストーン）。
	•	システムテスト期間 (計画: ○月○日～○月○日): 結合テスト合格後、ステージング環境でシステムテストを行います。前半は機能総合テスト（全業務シナリオの網羅）、後半は非機能テスト（性能・セキュリティ等）と同等性テストを集中的に実施します。性能テストやセキュリティ診断については、専門チームやツールの時間予約が必要なため、事前に日程を確保して臨みます。また、同等性テストでは現行システムからのデータ取得なども絡むため、現行環境側の準備も同時並行で進めます。システムテスト中盤には一度中間レビューを行い、進捗と主な不具合状況を共有します。後半で残りのテストケースとリグレッションテストを完了させ、最終的に「深刻な不具合がゼロ、テストカバレッジ100%、非機能要件も全て基準を満たす」状態をもってシステムテスト完了と判定します。システムテスト完了/本番移行承認会議を開催し、顧客に結果を報告します（マイルストーン）。
	•	ユーザー受入テスト (UAT)期間 (計画: ○月○日～○月○日): システムテスト合格後、顧客主導でのUATに入ります。UAT開始前にテストデータのリセットや環境リフレッシュを行い、クリーンな状態でユーザに引き渡します。UATではエンドユーザが実シナリオを操作し、特に同等性に関する最終確認を行います。我々テストチームはサポート役として待機し、ユーザから報告された不具合や要望を即時対応します。UAT期間は顧客の業務スケジュールに合わせ柔軟に設定しますが、計画では約○週間を想定しています。全ユーザ確認事項が完了し、ユーザ部門から正式な受入承認を得た時点でUAT終了となります。ユーザー受入テスト完了/本番移行Goサインがマイルストーンとなります。
	•	移行リハーサルと最終確認: UAT完了後、本番データ移行や切替手順の**リハーサル（ドライラン）**を実施します。これはテストではなく本番準備作業ですが、重要な節目のためここで記載します。リハーサルでは、実際の移行日に行うDB移行手順や設定変更作業を本番前にテスト環境で模擬実行し、問題点を洗い出します ￼。リハーサル完了後、最終レビュー会を開き、本番移行に向けたオールクリアを確認します。
	•	本番移行とポスト移行テスト: 移行当日（または期間）に計画通り本番環境への切替を行います。移行完了後、直ちにポスト移行テストを実施し、本番環境で主要機能が正常稼働していること、データが完全に移行されていることを確認します。これをもって正式に移行作業完了となります。

上記が大まかなテストスケジュールです。期間はプロジェクト全体計画に沿って調整しますが、テストフェーズには十分なカレンダー時間を確保し、焦りによる見逃しがないようにします。また、各マイルストーン時には進捗報告書を提出し、品質状況を「見える化」します。テスト期間中に重要な変更や問題が発生した場合は都度計画をアップデートし、顧客と合意の上柔軟に対応します。

8. テスト効率化の自動化機構提案

最後に、テストプロセス全体を通じて効率と精度を向上させるための自動化メカニズムの提案を行います。CI/CDパイプラインの導入やAWSの各種自動化サービスを活用することで、テストを反復可能かつ人的負荷の少ない形で実施します ￼。具体的な施策は以下の通りです。
	•	CI/CDパイプラインによる継続的テスト: AWSのCodeシリーズサービス（CodeCommit, CodeBuild, CodeDeploy, CodePipeline）を利用して、自動ビルド・自動テスト・自動デプロイのパイプラインを構築します。例えば、開発者がコードをGitリポジトリ（CodeCommit）にプッシュすると、CodePipelineがトリガーされ、まずCodeBuildが単体テストとビルドを実行します。AWS CodeBuildはソースコードのコンパイル、テストの実行、パッケージ生成までを行うフルマネージドサービスであり ￼、ここで全UTを自動的に実施します。テストが全て成功すれば、次にCodeDeploy/CodePipelineでテスト環境へ最新ビルドがデプロイされ、続けて自動化された結合テストスクリプトが走る、といった具合に一連の流れを自動化します。これにより、人手によるデプロイミスを防ぎ、素早いフィードバックサイクルを実現します。CI/CDパイプラインの自動化によって、テスト・ビルド・デプロイに伴う人為的ミスや属人化リスクを軽減できます ￼。
	•	自動テストスクリプトとフレームワークの活用: 機能テストおよびAPIテストの大部分を自動テストフレームワーク上で実行できるよう準備します。UIについてはSeleniumやPlaywrightなどのツールで主要画面操作シナリオを自動化し、回帰テスト時にワンクリックで実行・結果検証できるようにします。APIテストについてはPostmanのコレクションやJUnit＋REST Assured等でスクリプト化し、CI上で毎回実行します。また、前述の同等性テストの比較ツールもパイプラインに組み込み、環境ごとの差分チェックを定期的に回せるようにします。これら自動テストの結果はレポートとして集計・共有し、品質の見える化に役立てます。
	•	インフラテストの自動化: クラウドインフラ構成が正しいことを検証するため、AWS Configのルールやカスタムスクリプトによるインフラテストも自動化します。例えば、「S3バケットがパブリック公開されていないこと」「セキュリティグループで0.0.0.0/0が許可されていないこと」などのポリシーをAWS Configでルール化し、違反がないかを継続的にチェックします。また、TerraformやCloudFormationで環境構築している場合は、Terraform Planの差分チェックをCIで自動実行し、意図しない変更が入っていないか検証することも検討します。さらに、AWSが提供するツール（AWS Trusted Advisor等）からの指摘も定期的に確認し、セキュリティやコストの観点も含め自動化された品質チェックに組み込みます。
	•	AWS Codeシリーズとの統合: 前述のCI/CDではAWS Codeシリーズサービスを積極的に利用します。CodeCommitによるソース一元管理、CodeBuildによるビルド・テスト、CodeDeployによるデプロイ、CodePipelineによるパイプライン構築により、一連のリリースプロセスを自動化します。特にCodePipelineを用いることで、ビルド→テスト→デプロイの各ステージを定義し、可視化された形で実行できます ￼。パイプラインには手動承認ゲートも挿入できるため、例えば本番環境へのデプロイ前にテスト責任者の承認を要求するといったワークフローも組み込めます。自動化しつつ要所で人間の判断を入れることで、信頼性と柔軟性を両立させます。
	•	自動レポートと通知: テスト自動化の結果は即座に関係者へ通知されるようにします。例えば、CI/CDのテスト結果やカバレッジレポートをSlackやメールに自動送信し、失敗時には担当者にアラートが飛ぶよう設定します。これにより不具合検知から修正までのリードタイムを短縮します。また、定期テストのレポートはConfluence等に自動掲載し、誰でも最新品質状況を参照できるようにします。自動化されたエビデンス（テスト結果ログ、スクリーンショット、比較結果ファイルなど）も整理して保存し、レビューや監査に備えます。
	•	継続的インテグレーションの文化醸成: 自動化ツールは導入して終わりではなく、プロジェクトチーム全体で活用し、継続的にテストケースの追加や改良を行います。毎日のようにCIでテストが回り、開発者自身も失敗したテストを素早く修正して再コミットする、といった開発×テスト一体となった文化を推進します。これによりリリース直前になってバグが大量発生する事態を防ぎ、**「常にデプロイ可能な状態」**を保ちながら移行作業を進めます。

以上の自動化施策により、テスト工程の生産性を高めるとともに、ヒューマンエラーの低減とテスト頻度増加（反復実施）を実現します。CI/CDパイプラインを構築し自動化を実現することで、属人的な作業を減らし、誰が担当しても一定品質のテストが実施できる体制とします ￼。これらの取り組みによって、移行プロジェクトをより確実かつ効率的に進め、最終的なシステム品質の向上に寄与します。

⸻

以上、AWSクラウド移行プロジェクトにおける包括的なテスト方針を示しました。本方針に基づき、詳細なテスト項目や手順をテスト計画書に落とし込み、プロジェクトメンバー一丸となってテストを遂行してまいります。移行後のシステムが現行と同等以上の価値を提供できるよう、綿密なテストでその実現を支援いたします。各種テスト結果は適宜ご報告し、フィードバックを反映しながら進めていきますので、ご不明点や追加要望等ございましたら随時お申し付けください。



1. テストの目的と目標（修正版）

本テスト方針の目的は、現行システムをオンプレミス環境からAWSクラウド環境へ移行するにあたり、移行後の新システムが高い品質水準を維持し、期待される機能・性能・セキュリティ要件を満たすことを検証することです。

具体的な目標は以下の通りです：
	1.	機能的同等性の保証（同値性）
AWS移行後も、現行システムと同一の入力に対し、同一の出力・処理結果が得られること（＝同値性）を保証する。顧客が特に重視するこの要素を最優先事項として捉え、徹底的に検証する。
	2.	システム品質の確保（安定性・信頼性）
稼働中にシステムが不安定にならず、業務継続性を保てること。バグやクラッシュ、エラー発生の抑制に向けた多角的なテストを行う。
	3.	性能・スケーラビリティの検証
ピークアクセス時でも性能劣化しないこと。クラウド特有のスケーリング設計が期待通り機能し、現行と同等以上の性能を発揮すること。
	4.	セキュリティの保証
AWS環境下で機密情報の漏洩や不正アクセスがないよう、IAM権限制御・暗号化・監査ログ・脆弱性対策が適切に構成されているかをテストで確認し、安全性を保証する。
	5.	災害時の復旧能力（ディザスタリカバリ）
マルチAZ構成やバックアップを活用し、大規模障害・リージョン障害時にも業務を早期復旧できることをテストで確認する。**事業継続性（BCP）**の観点から、DRテストを重要項目と位置づける。
	6.	ユーザ受入の信頼獲得
顧客自身が「AWSに移行しても安心」と納得できるよう、エビデンスを伴うテスト結果を提出し、受入承認を得る。

